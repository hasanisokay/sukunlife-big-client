'use client'
import { useEffect, useRef, useState } from "react";
import Link from "next/link";
import { usePathname } from "next/navigation";
import { useDispatch, useSelector } from "react-redux";
import logOut from "@/utils/logOut.mjs";
import { setUserData } from "@/store/slices/authSlice";
import { motion, AnimatePresence } from "framer-motion";
import { CartSVG } from "../svg/SvgCollection";
import { setCartData } from "@/store/slices/cartSlice";
import userShortName from "./userShortName.mjs";

const Navbar = () => {
  const [menuOpen, setMenuOpen] = useState(false);
  const [userMenuOpen, setUserMenuOpen] = useState(false);
  const navRef = useRef();
  const currentPath = usePathname();
  const [lastScrollY, setLastScrollY] = useState(0);
  const [visible, setVisible] = useState(true);
  const user = useSelector((state) => state.user.userData);
  const cart = useSelector((state) => state.cart.cartData);
  const dispatch = useDispatch();
  const [cartItems, setCartItems] = useState(cart?.length || 0)
  const toggleMenu = () => setMenuOpen(!menuOpen);
  const handleScroll = () => {
    if (window.scrollY > lastScrollY) {
      setVisible(false);
      setMenuOpen(false);
      setUserMenuOpen(false)
    } else {
      setVisible(true);
    }
    setLastScrollY(window.scrollY);
  };

  useEffect(() => {
    setCartItems(cart?.length || 0)
  }, [cart])



  useEffect(() => {
    try {
      const cartInStorage = localStorage.getItem('cart')
      let cartFromStorage;
      if (cartInStorage) {
        cartFromStorage = JSON.parse(cartInStorage) || [];
      } else {
        cartFromStorage = []
      }
      if (cart?.length < cartFromStorage?.length) {
        dispatch(setCartData(cartFromStorage));
      } else {
        localStorage.setItem("cart", JSON.stringify(cart));
      }
    } catch {
      localStorage.removeItem("cart");
    }
  }, []);

  useEffect(() => {
    window.addEventListener("scroll", handleScroll);
    return () => {
      window.removeEventListener("scroll", handleScroll);
    };
  }, [lastScrollY]);

  useEffect(() => {
    if (!menuOpen && !userMenuOpen) return;

    const handleClick = (event) => {
      if (navRef.current && !navRef.current.contains(event.target)) {
        setUserMenuOpen(false);
        setMenuOpen(false);
      }
    };

    document.addEventListener('click', handleClick);

    // Cleanup function to remove the event listener
    return () => {
      document.removeEventListener('click', handleClick);
    };
  }, [menuOpen, userMenuOpen]);


  const handleLogOut = async () => {
    await fetch("/api/logout")
    await logOut();
    dispatch(setUserData(null));
    window.location.reload();
  };

  const getLinkClass = (path) => {
    return path === currentPath
      ? "text-white bg-gray-700 px-3 py-2 rounded-md text-sm font-medium"
      : "relative  px-3 py-2 rounded-md text-sm font-medium group transition-colors";
  };


  return (
    <div ref={navRef} className="h-[110px] montserrat-font ">
      <div className="dark:bg-[#0c0c0e] sticky top-0 z-50 w-full bg-gray-700 supports-[backdrop-filter]:bg-background/60 shadow-lg">
        <nav
          className={`fixed  top-0 left-0 w-full mx-auto px-2 bg-gray-100 dark:bg-[#111827]  sm:px-6 lg:px-8 z-50 transition-transform duration-300  shadow-md border-b border-gray-500/20 ${visible ? "transform-none shadow-[0_4px_20px_rgba(0,0,0,0.3)]" : "-translate-y-full shadow-none"
            }`}
          aria-label="Global"
        >
          <div className="flex nav-wrapper  items-center justify-between relative">
            <div className="absolute inset-y-0 right-0 flex items-center nav-theme-switch-lg">
              <button
                type="button"
                onClick={toggleMenu}
                className="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white focus:outline-none"
                aria-controls="mobile-menu"
                aria-expanded={menuOpen ? "true" : "false"}
              >
                <span className="sr-only">Open main menu</span>
                <motion.div
                  animate={menuOpen ? "open" : "closed"}
                  variants={{
                    open: { rotate: 180, scale: 1.1 },
                    closed: { rotate: 0, scale: 1 },
                  }}
                  transition={{ duration: 0.3 }}

                >
                  {menuOpen ? (
                    <span className="  text-red-500 text-2xl">âœ–</span>
                  ) : (
                    <motion.svg
                      className="h-6 w-6"
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                    >
                      <motion.path
                        strokeLinecap="round"
                        strokeLinejoin="round"
                        strokeWidth="2"
                        initial={{ d: "M4 6h16M4 12h16M4 18h16" }} // Set default path
                        animate={menuOpen ? "open" : "closed"}
                        variants={{
                          closed: { d: "M4 6h16M4 12h16M4 18h16" },
                          open: { d: "M6 6L18 18M6 18L18 6" },
                        }}
                        transition={{ duration: 0.3 }}
                      />
                    </motion.svg>
                  )}
                </motion.div>
              </button>
            </div>
            <Link href="/" className="text-2xl font-bold ">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="181"
                height="41"
                fill="none"
                viewBox="0 0 181 41"
              >
                <g clipPath="url(#clip0_166_2120)">
                  <path
                    fill="#63953A"
                    d="M133.385 26.947V10.645a.91.91 0 0 0-.468-.803c-.655-.355-1.657-.513-2.552-.579h-1.885v.132c.401.105.735.25 1.029.42a.8.8 0 0 1 .174.106c.749.5 1.096 1.197 1.096 1.974v16.223h12.295v-1.157h-9.676zM145.506 9.263h-1.938v.132c.709.197 1.243.473 1.617.842.054.053.107.105.147.158.134.145.241.316.321.487.16.315.227.658.227 1.013v16.223h2.62V10.961c0-.606-.388-1.132-.963-1.33-.614-.21-1.363-.315-2.044-.368zM164.469 10.237v-.974H150.09v.132c.481.118.882.302 1.203.513.761.5 1.122 1.197 1.122 1.96v16.25h2.873v-9.25h7.658v-1.157h-7.658v-7.474zM180.947 27.132v.973h-12.054V11.882c0-1.106-.735-2.066-2.326-2.5V9.25h14.38v.974h-9.181v7.473h7.657v1.158h-7.657v8.263h9.181z"
                  ></path>
                  <path
                    fill="#74523E"
                    d="M111.883 10.855c-.655-.54-1.911-1.618-3.809-1.618v.131c2.072.592 2.272 2.724 2.272 4.198v13.329c.348-.198.735-.434 1.176-.71V14.617l6.695 6.474A53 53 0 0 0 120.396 19l-8.526-8.145zm12.402-1.618v5.368c.4-.513.788-1.026 1.176-1.552V9.237zM50.636 23.263c0 1.96-1.47 5.198-5.987 5.198-3.581 0-5.88-1.514-6.428-5.382h.869c.574 3.526 3.554 4.303 5.278 4.303 3.06 0 3.796-2.106 3.796-3.04 0-1.987-1.644-3.066-4.785-4.658-1.99-1-5.358-2.645-5.358-5.868 0-4.092 4.102-4.921 5.572-4.921 3.662 0 5.172 1.908 5.693 4.605h-.935c-.388-1.421-1.444-3.553-4.731-3.553-1.617 0-3.341 1.29-3.341 2.908 0 1.908 2.325 3.119 4.73 4.33 4.544 2.236 5.64 3.828 5.64 6.078zM66.7 9.237V22c0 4.737-4.504 5.329-6.014 5.329 0 0-4.864.329-4.864-5.329V10.829c0-1.237-2.232-1.54-3.769-1.592h-1.43v.131c1.59.435 2.325 1.395 2.325 2.5v10.145c0 6.816 7.47 6.46 7.47 6.46 7.244 0 7.444-5.302 7.444-6.46V9.237h-1.176zM105.335 9.237V22c0 4.737-4.504 5.329-6.014 5.329 0 0-4.865.329-4.865-5.329V10.829c0-1.237-2.231-1.54-3.768-1.592h-1.43v.131c1.59.435 2.325 1.395 2.325 2.5v10.145c0 6.816 7.47 6.46 7.47 6.46 7.244 0 7.444-5.302 7.444-6.46V9.237h-1.176z"
                  ></path>
                  <path
                    fill="#74523E"
                    d="M130.245 4.96c-2.045 4.303-4.824 8.237-7.978 11.803-3.542 3.974-7.631 7.54-12.308 10.105-2.339 1.277-4.825 2.29-7.417 2.843-2.593.579-5.28.657-7.872.184-1.978-.355-3.875-1.066-5.64-2.013a17 17 0 0 1-1.59-.948c-1.095-.724-2.058-1.605-3.02-2.474l-7.23-6.894 8.674-8.316h-1.67l-9.516 9.105V10.83c0-1.237-2.232-1.54-3.769-1.592h-1.43v.131c1.618.435 2.326 1.395 2.326 2.5V28.08h2.873v-9.316s8.152 7.776 8.179 7.776h.013c.053.053.28.237.655.514.107.079.214.157.347.25 2.38 1.684 8.7 5.315 16.812 3.552h-.067c.709-.118 1.417-.25 2.112-.408 2.673-.631 5.198-1.71 7.55-3.052 4.718-2.698 8.754-6.369 12.242-10.434 3.14-3.685 5.866-7.724 7.831-12.119.067-.145.133-.29.187-.434.027-.053.04-.105.053-.158-.107.237-.213.474-.334.71z"
                  ></path>
                  <path
                    fill="#63953A"
                    d="M60.004 22.947s-2.005-2 .828-4.881c.815-.83 1.056-1.592.99-2.276 0 0 4.77 4.644-1.164 7.552 0 0-.307-.895 1.056-2.92.655-.988.762-1.711.695-2.198 0 0-.093 1.066-1.19 2.25-1.095 1.184-1.202 2.473-1.202 2.473h-.027zM130.672 3.96c-.027.093-.053.172-.08.264-.08.223-.187.473-.321.723-.04.08-.08.145-.12.224l-.027-.026c-.107-.106-.548-.632-.575-2.237-.013-.855-.24-1.355-.494-1.632.067.132.361.803.214 1.869-.161 1.197.32 2.04.32 2.04h-.026s-2.098-.409-1.577-3.382c.147-.856-.027-1.435-.361-1.816 0 0 3.982.724 3.047 3.96zM124.284 22.697l-3.288-3.144c-.735.75-1.47 1.447-2.191 2.092l6.655 6.42v-13.67c-.374.5-.775 1-1.176 1.487v6.8149999999999995"
                  ></path>
                  <path
                    fill="#74523E"
                    d="M41.615 39.855c-.534 0-.882-.21-1.082-.408v1.527h-.655V37.04h.655v.407c.187-.21.52-.407 1.082-.407 1.002 0 1.417.605 1.417 1.407 0 .803-.414 1.421-1.417 1.421zm-1.082-2.131v1.447c.761.921 1.777.566 1.777-.737s-1.016-1.631-1.777-.723zM48.631 37.04v.328c-.481 0-.989-.065-1.163.764v1.644h-.655v-2.75h.655v.71c.187-.591.588-.71 1.163-.71zM55.06 38.434c0 .987-.696 1.421-1.551 1.421s-1.564-.434-1.564-1.42c0-.988.695-1.409 1.564-1.409.868 0 1.55.448 1.55 1.408m-.71 0c0-.868-.267-1.29-.841-1.29-.575 0-.842.422-.842 1.29s.28 1.29.842 1.29.842-.395.842-1.29M60.565 39.855c-.534 0-.882-.21-1.082-.408v1.527h-.655V37.04h.655v.407c.187-.21.521-.407 1.082-.407 1.003 0 1.417.605 1.417 1.407 0 .803-.414 1.421-1.417 1.421zm-1.069-2.131v1.447c.762.921 1.778.566 1.778-.737s-1.016-1.631-1.778-.723zM68.543 37.934v1.855h-.655v-1.815c0-.527-.36-.75-.654-.75-.388 0-.655.17-.816.355v2.224h-.654v-4.027h.654v1.566a1.3 1.3 0 0 1 .83-.29c.921 0 1.295.461 1.295.895zM73.047 38.316v.131c0 1.014 1.082 1.777 2.111.777l.107.092c-.04.066-.4.552-1.35.552-1.002 0-1.59-.618-1.59-1.42 0-.803.588-1.408 1.59-1.408 1.203 0 1.35.776 1.35 1.078v.211h-2.218zm.013-.21h1.417c0-.606-.134-.882-.562-.882-.427 0-.775.197-.855.881M80.879 39.474c-.16.17-.388.394-.922.394-.602 0-.628-.263-.628-.526V37.25h-.535v-.21h.535v-.698h.654v.697h.695v.21h-.695v1.988c0 .158-.04.381.187.434.134.04.415-.013.575-.263zM85.275 36.237c0 .184-.187.342-.4.342-.215 0-.415-.158-.415-.342s.187-.342.414-.342.401.158.401.342m-.08 3.54h-.655v-2.75h.655zM91.756 39.276a1.47 1.47 0 0 1-1.176.58c-.962 0-1.523-.606-1.523-1.409 0-.802.56-1.42 1.523-1.42.695 0 1.056.38 1.176.565l-.16.119c-.735-.922-1.831-.566-1.831.736s1.082 1.632 1.817.737zM103.209 37.934v1.855h-.654v-1.815c0-.527-.361-.75-.655-.75a1.05 1.05 0 0 0-.815.355v2.224h-.655v-4.027h.655v1.566c.2-.158.467-.29.828-.29.922 0 1.296.461 1.296.895zM107.713 38.316v.131c0 1.014 1.082 1.777 2.111.777l.107.092c-.04.066-.401.552-1.349.552-1.003 0-1.591-.618-1.591-1.42 0-.803.588-1.408 1.591-1.408 1.202 0 1.349.776 1.349 1.078v.211h-2.218zm.013-.21h1.417c0-.606-.134-.882-.561-.882s-.776.197-.856.881M116.426 37.842v1.934h-.655v-.408c-.348.448-2.058.935-2.058-.289 0-.96 1.176-.855 2.058-1.132v-.263c0-.342-.174-.5-.601-.5-.228 0-.695-.013-1.029.382l-.188-.04c.281-.434.802-.513 1.19-.513.935 0 1.269.33 1.269.83zm-.655 1.382v-1.119c-.655.171-1.35.171-1.35.921s.762.763 1.35.198M120.863 39.776h-.655V35.75h.655zM125.46 36.237c0 .184-.187.342-.401.342s-.414-.158-.414-.342.187-.342.414-.342.401.158.401.342m-.08 3.54h-.655v-2.75h.655zM132.022 37.934v1.856h-.655v-1.816c0-.526-.361-.75-.641-.75-.388 0-.655.17-.829.355v2.224h-.655v-2.75h.655v.29c.2-.159.481-.29.829-.29.922 0 1.296.46 1.296.895zM138.877 40.066c0 .395-.187.934-1.536.934-1.217 0-1.537-.368-1.537-.71 0-.343.307-.514.588-.593-.254 0-.588-.197-.588-.565 0-.474.454-.619.588-.645a.75.75 0 0 1-.254-.592c0-.58.534-.869 1.136-.869.214 0 .414.04.588.106h.895v.21h-.561a.78.78 0 0 1 .227.553c0 .605-.535.868-1.136.868-.294 0-.588-.066-.748-.17-.107.025-.455.065-.428.354.04.264.842.224 1.203.224.628 0 1.55-.066 1.55.908zm-.227.105c0-.355-.374-.474-.975-.474h-.695c-.415 0-.602.264-.602.592 0 .277.281.58.963.58 1.122 0 1.309-.33 1.309-.698m-1.884-2.276c0 .552.12.723.534.723s.495-.17.495-.723-.094-.737-.495-.737c-.4 0-.534.21-.534.737M150.237 39.276a1.47 1.47 0 0 1-1.176.58c-.963 0-1.524-.606-1.524-1.409 0-.802.561-1.42 1.524-1.42.695 0 1.055.38 1.176.565l-.161.119c-.735-.922-1.831-.566-1.831.736s1.083 1.632 1.818.737zM154.62 38.316v.131c0 1.014 1.083 1.777 2.112.777l.106.092c-.04.066-.4.552-1.349.552-1.003 0-1.591-.618-1.591-1.42 0-.803.588-1.408 1.591-1.408 1.202 0 1.349.776 1.349 1.078v.211h-2.218zm.013-.21h1.417c0-.606-.134-.882-.561-.882s-.775.197-.856.881M163.4 37.934v1.856h-.655v-1.816c0-.526-.361-.75-.641-.75-.388 0-.655.17-.829.355v2.224h-.655v-2.75h.655v.29c.2-.159.481-.29.829-.29.922 0 1.296.46 1.296.895zM169.08 39.474c-.16.17-.388.394-.922.394-.602 0-.628-.263-.628-.526V37.25h-.535v-.21h.535v-.698h.654v.697h.695v.21h-.695v1.988c0 .158-.04.381.188.434.133.04.414-.013.574-.263zM173.183 38.316v.131c0 1.014 1.082 1.777 2.111.777l.107.092c-.04.066-.401.552-1.35.552-1.002 0-1.59-.618-1.59-1.42 0-.803.588-1.408 1.59-1.408 1.203 0 1.35.776 1.35 1.078v.211h-2.218zm.026-.21h1.417c0-.606-.134-.882-.561-.882s-.776.197-.856.881M181 37.04v.328c-.481 0-.989-.065-1.163.764v1.644h-.654v-2.75h.654v.71c.188-.591.588-.71 1.163-.71z"
                  ></path>
                  <path
                    fill="#63953A"
                    d="M2.82 40.29s-.44-.369-1.162-.435C.963 39.803.602 39.5.575 39.474c.134.184.388.381.909.5.962.223 1.203.552 1.243.618-.12.04-.24.066-.348.092-.093.013-.187.027-.267.04-.094 0-.187.013-.28.013C-.08 40.789 0 38.513 0 38.513c.188.237.508.421 1.03.448 1.817.078 1.79 1.342 1.79 1.342zM32.742 25.434c-.093.04-.187.079-.307.105-.04 0-.08.013-.107.027-.067 0-.134.026-.2.026v-.053c.026-.092.133-.302.52-.592.254-.184.348-.368.375-.487 0 0-.12.264-.508.46a1.23 1.23 0 0 0-.535.514s-.32-.697.668-1.158c.281-.131.415-.302.468-.487 0 0 .562 1.171-.387 1.645zM24.23 21.776a26 26 0 0 1-1.751-1.197c-.428-.316-.883-.645-1.19-1.08-.187-.25-.32-.539-.4-.841a3.4 3.4 0 0 1-.108-.737v-.434c0-.106.014-.198.027-.303 0-.053.013-.118.027-.171.093-.54 0-.158-.294 1.145.107-.408.214-.83.32-1.25.027-.08.16-.658.067-.33-.374 1.382-1.029 3.093-.28 4.461.24.448.614.777 1.002 1.092a22 22 0 0 0 2.112 1.474c-.027-.013.227-.829.24-.908.027-.079.28-.881.227-.908z"
                  ></path>
                  <path
                    fill="#63953A"
                    d="M20.608 17.776a24 24 0 0 0 2.125 1.895c.6.487 1.282.895 1.844 1.421.36.342.614.79.735 1.263.08.316.12.645.107.96 0 .198-.014.395-.04.606-.014.158-.054.316-.08.474-.08.394 0 .079.24-.935a2 2 0 0 1-.094.277c-.173.54-.307 1.342-.44 1.763.253-.803.454-1.645.654-2.46.107-.474.2-.961.214-1.448.013-.671-.12-1.368-.508-1.934-.427-.619-1.162-1.013-1.75-1.474a27 27 0 0 1-2.553-2.237c.053.053-.214.816-.24.908-.054.21-.107.434-.16.645 0 .04-.081.25-.068.263z"
                  ></path>
                  <path
                    fill="#63953A"
                    d="M23.267 20.092a6.6 6.6 0 0 1 .749 2.553c0-.053.066-.237.08-.263l.16-.645c.067-.263.24-.632.227-.908a6.4 6.4 0 0 0-.748-2.553c0 .014-.08.29-.08.264-.054.21-.107.434-.16.644s-.108.434-.161.645c0 .053-.08.224-.067.263M21.97 31.04c-1.39 1.394-3.006 2.63-4.597 3.789-4.423 3.105-9.635 5.013-14.994 5.895l-.267.039c-.094 0-.187.013-.281.013.294-.053.601-.105.895-.158 5.186-.987 10.197-2.947 14.46-6.04 1.524-1.157 3.1-2.38 4.45-3.776.054.04.12.08.174.132l.16.118zM25.311 26.118c-.427 1.171-1.082 2.25-1.857 3.25-.04.066-.094.119-.134.171s-.093.119-.147.171q-.42.514-.882.987c-.013 0-.027-.026-.04-.026l-.16-.118-.134-.093c.307-.329.588-.657.869-1l.133-.17c.04-.066.094-.119.134-.185.722-.96 1.31-2 1.724-3.145zM25.458 25.684h-.027l-.48-.158a10 10 0 0 0 .08-.302 9.2 9.2 0 0 0 .106-4.185l.602-.118c.307 1.737.173 3.316-.281 4.763"
                  ></path>
                  <path
                    fill="#63953A"
                    d="M32.849 25.368q-.12.08-.281.158c-.04.013-.067.026-.107.04-.789.302-1.63.526-2.472.644-.602.092-1.203.119-1.805.106h-.45399999999999996c-.147-.014-.307-.04-.454-.053l-.455-.053-.454-.079c-.307-.039-.588-.131-.882-.197l-.107-.026-.107-.04-.214-.066-.213-.065-.107-.04-.107-.04-.428-.157c-.067-.026-.147-.053-.214-.092l-.214-.092-.213-.092a1.5 1.5 0 0 1-.2-.106c-.134-.066-.268-.131-.402-.21a12.3 12.3 0 0 1-2.405-1.724v-.21c0-.303.053-.645.067-.75v-.027a11.8 11.8 0 0 0 2.632 2.224c.12.079.254.145.374.224.067.04.12.079.188.105l.2.092.2.105s.134.066.2.092l.402.171.093.04.107.04.2.078.201.08.107.039.107.026c.28.079.561.184.842.237.147.026.28.066.427.092l.442.066c.146.026.294.052.44.066l.214.026h.107l.107.013a10.909 10.909 0 0 0 4.076-.474c.2-.065.388-.118.575-.197zM17.36 28.908c-.936 1.645-1.31 3.79-.428 5.474.04.092.094.184.147.263-.32.236-.655.46-.989.684-.026-.04-.04-.08-.067-.132-.026-.052-.04-.105-.066-.158-1.056-2.657.24-5.67 2.312-7.447a9 9 0 0 0-.922 1.316zM20.661 36.368l-.187 1.869c-1.617-.263-3.194-1.04-4.09-2.395.362-.237.722-.474 1.07-.71.802.855 2.005 1.223 3.207 1.236M22.813 11.118s1.176-1.158-.455-2.842c-.468-.487-.601-.934-.561-1.329 0 0-2.806 2.671.628 4.408 0 0 .187-.526-.601-1.71-.375-.58-.428-1-.388-1.277 0 0 .053.619.668 1.316s.682 1.448.682 1.448M22.839 6.316c.28 0 .508-.224.508-.5s-.228-.5-.508-.5a.504.504 0 0 0-.508.5c0 .276.227.5.508.5M23.334 5.316s.655-.895-.214-1.487-.481-1.145-.027-1.276c.548-.158 1.858 1.17.24 2.75zM23.494 5.842s1.043.408.628 1.368.214 1.211.668 1.093c.548-.145.936-1.961-1.296-2.448zM25.912 4.92c-.027-.091-.601-1.683-2.499.659 2.833 1.105 2.512-.553 2.5-.645z"
                  ></path>
                  <path
                    fill="#63953A"
                    d="M24.91 15.67c-.801-.762-1.75-1.394-2.579-2.13-.467-.409-.962-.83-1.283-1.356a1.3 1.3 0 0 1-.16-.303v-.026c0-.026-.027-.066-.04-.092a1.7 1.7 0 0 1-.08-.368c-.027-.303 0-.658.026-.908v-.08c.014-.157.04-.25.04-.25l-.093.37c.04-.146.067-.264.094-.37-.214.738-.455 1.5-.562 2.277-.053.421-.04.855.12 1.25.188.487.602.882.976 1.237.882.842 1.871 1.553 2.793 2.329.842.71 1.19 1.645 1.083 2.75.053-.619.4-1.21.467-1.83.08-.933-.133-1.854-.828-2.512z"
                  ></path>
                  <path
                    fill="#63953A"
                    d="M24.683 26.96c-.561-.434-1.176-.815-1.75-1.21s-1.217-.75-1.711-1.237a2.44 2.44 0 0 1-.588-.882 2 2 0 0 1-.067-.276v-.381c0-.303.053-.645.067-.75v-.027s0 .04-.027.092l-.2.75c-.067.277-.134.54-.2.816-.068.276-.134.566-.134.855 0 .658.293 1.25.775 1.698.454.42 1.029.75 1.537 1.092.427.29.855.579 1.269.881.053.04.107.08.174.119.347-.513.641-1.013.895-1.526l-.013-.014zm.869.803a9 9 0 0 0-.495-.487c-.254.5-.548 1-.895 1.5.494.369.975.763 1.27 1.303.36.658.494 1.408.507 2.17a1 1 0 0 0-.12-.236c-.454-.776-1.203-1.395-1.884-1.96-.147-.119-.294-.237-.455-.356-.053-.052-.12-.092-.173-.145-.067-.039-.12-.092-.187-.131l-.16-.119c-1.204-.881-2.473-1.657-3.676-2.552a17 17 0 0 1-1.777-1.487 12.38 12.38 0 0 1-2.873-4.316c-2.26-5.79.2-11.71 5.933-14.29a15 15 0 0 1 1.59-.63c0-.04-.013-.067-.026-.106-.562.158-1.11.342-1.658.553-8.58 3.315-9.822 13.144-4.436 19.539a13.5 13.5 0 0 0 2.058 2.026c1.216.974 2.539 1.79 3.808 2.685l.027.026c.067.04.12.092.187.131s.12.093.187.132c.268.197.535.395.802.605.548.421 1.096.882 1.577 1.395.053.053.922.868.922 1.618.094-.144.107-.368.147-.526.294-1.131.615-2.263.628-3.447 0-.974-.16-2.119-.855-2.869zm.52 5.013s.028-.026.028 0-.027.04-.027.066v-.079z"
                  ></path>
                  <path
                    fill="#63953A"
                    d="M24.47 20.829s.08.42-.709 2.776l-.414-.842s.133-.276.28-.474.321-.526.388-.618.187-.25.187-.382c0-.131.04-.17.04-.263 0-.092.24-.21.24-.21z"
                  ></path>
                  <path
                    fill="#63953A"
                    d="M24.015 22.645s-.307-2.224-.895-2.685 0-.79 0-.79.561.264.628.409.24.197.347.842-.066 2.237-.066 2.237zM21.075 15.96s-.775 2.606-.748 3.356.214.644.214.644l.16-.697v-1.25l.174-.934s.24-.553.2-.605c-.04-.053 0-.527 0-.527z"
                  ></path>
                  <path
                    fill="#63953A"
                    d="m21.075 15.96.054.106v.105l-.067.053-.027-.093.04-.157zM26.273 29.25s.575 2.026-.641 5.355l.12-.855.334-1.579s.08-1.329.08-1.408-.147-1.118-.147-1.118l.254-.408zM25.565 35.395c-.267-.803-1.002-1.421-1.63-1.948-.321-.276-.669-.5-.963-.79-.454-.446-.641-1.012-.588-1.63 0 0-.334.855-.44 1.63 0 .067-.014.12-.027.185v.33c.026.42.16.815.44 1.144.268.316.615.54.936.802.575.461 1.19.987 1.577 1.619.267.434.36.947.36 1.447 0 0-.012-.026-.026-.04-.147-.065-.307-.289-.428-.407a7 7 0 0 0-.32-.303L22.959 36s-.214.816-.24.908c-.054.21-.107.434-.16.645 0 .04-.081.25-.068.263.308.302.628.605.936.908-.495.46-1.23.592-1.871.237-.922-.527-1.002-1.685-.909-2.606-.067.619-.4 1.21-.468 1.83-.093.933-.013 2.091.91 2.604.841.474 1.87.08 2.244-.763.12-.276.16-.618.24-.908l.04-.197.576.54c.146.131.28.276.427.407.16.145.187.303.267.04.12-.382.228-.763.321-1.158.267-1.066.695-2.263.32-3.368zM24.47 21s1.43.803.614 4.013l.548-1.224-.44-2.5-.522-.579-.2.277z"
                  ></path>
                  <path
                    fill="#63953A"
                    d="M25.712 20.342s.655 2.026-.067 4.71l-.173-1.894v-2.434l.254-.382zM24.35 4.303s.28-.724.106-1.092c-.173-.369 1.203.131-.106 1.092M24.764 6.171s.708.316.868.697c.16.382.762-.934-.868-.697"
                  ></path>
                </g>
                <defs>
                  <clipPath id="clip0_166_2120">
                    <path fill="#fff" d="M0 0h181v41H0z"></path>
                  </clipPath>
                </defs>
              </svg>
            </Link>
            <div className="nav-items items-center justify-center ">
              <Link href="/about-us" className={getLinkClass("/about-us")}>
                About Us
              </Link>
              <Link href="/courses" className={getLinkClass("/courses")}>
                Courses
              </Link>
              <Link href="/shop" className={getLinkClass("/shop")}>
                Products
              </Link>
              <Link href="/blog" className={getLinkClass("/blog")}>
                Blog
              </Link>
              <Link href="/resources" className={getLinkClass("/resources")}>
                Resources
              </Link>
              {/* <Link href="/cart" className="relative">
                <motion.div
                  animate={cartItems > 0 ? { scale: [1, 1.2, 1] } : {}}
                  transition={{ duration: 0.3 }}
                >
                  <CartSVG color={cartItems > 0 ? "#ef4444" : "currentColor"} />
                  <span
                    className={`absolute -top-3 right-0 text-xs ${cartItems > 0 ? "pop text-red-500" : ""
                      }`}
                  >
                    {cartItems < 100 ? cartItems : "99+"}
                  </span>
                </motion.div>
              </Link> */}
            </div>
            <div className="nav-items gap-[15px]">
              <button className="block w-[196px] h-[54px]">
                <Link
                  href="/book-appointment"
                  className="rounded-full btn-rounded-transparent block text-green  green-border"
                >
                  Book Appointment
                </Link>
              </button>
              {user ? (
                <button className="block w-[173px] h-[54px]">
                  <Link
                    href="/dashboard"
                    className="rounded-full btn-rounded-transparent block border-[#63953A] border"
                  >
                    Dashboard
                  </Link>
                </button>
              ) : (
                <>
                  <button className="block w-[173px] h-[54px]">
                    <Link
                      href="/signup"
                      className=" btn-rounded-green btn-rounded-transparent rounded-full block"
                    >
                      Sign Up
                    </Link>
                  </button>
                </>
              )}
            </div>
          </div>

          {/* Mobile Menu */}
          <AnimatePresence>
            {menuOpen && (
              <motion.div
                initial={{ opacity: 0, y: -20 }}
                animate={{ opacity: 1, y: 0 }}
                exit={{ opacity: 0, y: -20 }}
                transition={{ duration: 0.2 }}
                className="nav-theme-switch-lg"
                id="mobile-menu"
              >
                <div className="flex flex-col px-2 pt-2 pb-3 space-y-1">
                  <Link href="/about-us" className={getLinkClass("/about-us")}>
                    About Us
                  </Link>
                  <Link href="/courses" className={getLinkClass("/courses")}>
                    Courses
                  </Link>
                  <Link href="/shop" className={getLinkClass("/shop")}>
                    Products
                  </Link>
                  <Link href="/blog" className={getLinkClass("/blog")}>
                    Blog
                  </Link>
                  <Link href="/resources" className={getLinkClass("/resources")}>
                    Resources
                  </Link>
                  <button className="block w-[196px] h-[54px]">
                    <Link
                      href="/book-appointment"
                      className="rounded-full btn-rounded-transparent block text-green  green-border"
                    >
                      Book Appointment
                    </Link>
                  </button>
                  {user ? (
                    <button className="block w-[173px] h-[54px]">
                      <Link
                        href="/dashboard"
                        className="rounded-full btn-rounded-transparent block border-[#63953A] border"
                      >
                        Dashboard
                      </Link>
                    </button>
                  ) : (
                    <>
                      <button className="block w-[173px] h-[54px]">
                        <Link
                          href="/signup"
                          className=" btn-rounded-green btn-rounded-transparent rounded-full block"
                        >
                          Sign Up
                        </Link>
                      </button>
                    </>
                  )}
                  <Link href="/cart" className={`flex ${getLinkClass("/cart")}`}>
                    <CartSVG color={cartItems > 0 && '#ef4444'} />
                    <span className={`text-xs  ${cartItems > 0 ? 'pop text-red-500' : ''}`}
                    >{cartItems < 100 ? cartItems : "99+"}</span>
                  </Link>
                </div>
              </motion.div>
            )}
          </AnimatePresence>
        </nav>
      </div>
    </div>
  );
};

export default Navbar;